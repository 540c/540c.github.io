# 前中后缀表达式

## 中缀表达式
最常见人们最熟悉的运算表达式就是中缀表达式，例如`(3+4)*5/6`就是中缀表达式。但是计算机很难处理中缀表达式，所以往往需要转换成后缀表达式处理。

## 后缀表达式
又叫逆波兰表达式，运算符位于操作数之后，例如中缀表达式`(3+4)*5/6`的后缀表达式写法为`3 4+5*6/`。

### 中缀表达式转换为后缀表达式
- 约定栈中运算符优先级：`*` = `/` > `+` = `-` > `(` = `)`
- 初始化一个栈和一个后缀表达式字符串
- 从左至右依次扫描中缀表达式中的元素：
    1. 如果元素是`(`，入栈
    2. 如果元素是数字，添加到后缀表达式中
    3. 如果元素是运算符，先将栈顶优先级不低于该运算符的运算符出栈，添加到后缀表达式中，再将该运算符入栈（当`(`在栈中时，优先级最低）。
    4. 如果元素是`)`，将所有栈顶元素依次出栈，添加至后缀表达式中，直到第一个`(`出栈
- 直至表达式结束，栈中还有元素的话，将所有元素出栈添加至后缀表达式中

以中缀表达式`(3+4)*5/6`为例

|步骤|扫描元素|栈|后缀表达式|说明|
|-|-|-|-|-|
|1|`(`|`(`|` `|`(`入栈|
|2|`3`|`(`|`3`|数字`3`加入表达式|
|3|`+`|`(` `+`|`3`|`+`入栈|
|4|`4`|`(` `+`|`3 4`|数字`4`加入表达式|
|5|`)`||`3 4 +`|扫描到`)`闭合括号，将所有顶元素依次出栈，`+`加入表达式|
|6|`*`|`*`|`3 4 +`|`*`入栈|
|7|`5`|`*`|`3 4 + 5`|数组`5`加入表达式|
|8|`/`|`/`|`3 4 + 5 *`|`*`出栈加入表达式，`/`入栈|
|9|`6`|`/`|`3 4 + 5 * 6`|数字`6`加入表达式|
|10||`/`|`3 4 + 5 * 6 /`|表达式结束，所有元素出栈加入表达式|

### 后缀表达式计算求值
- 从左往右扫描表达式，遇到数字时，数字入栈
- 遇到运算符时，弹出栈顶的两个数，计算结果
    - 注意顺序：`次顶元素` `运算符` `栈顶元素`
- 将结果入栈，重复上述过程直到表达式最右端
- 最后结果即为计算结果

以后缀表达式`3 4+5*6/`为例

|步骤|扫描元素|栈|说明|
|-|-|-|-|
|1|`3`|`3`|数字`3`入栈|
|2|`4`|`3` `4`|数字`4`入栈|
|3|`+`|`7`|遇到运算符，弹出`4` `3`，`+`运算获得`7`并入栈|
|4|`5`|`7` `5`|数字`5`入栈|
|5|`*`|`35`|遇到运算符，弹出`5` `7`，`*`运算获得`35`并入栈|
|6|`6`|`35` `6`|数字`6`入栈|
|7|`/`||遇到运算符，弹出`6` `35`，`/`运算获得`5.8333`|